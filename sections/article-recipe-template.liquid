<!-- /templates/article.liquid -->
{% comment %}

  Comments will not appear right after they are submitted, either to be checked for spam
  or to await moderation. When a comment is submitted, the browser is redirected to a page
  that includes the new comment id in its URL.
    Example: http://shopname.myshopify.com/blogs/news/2022072-my-post?comment=3721372

  More information:
    - http://docs.shopify.com/themes/liquid-variables/comment

{% endcomment %}

{% assign number_of_comments = article.comments_count %}

{% comment %}
  If a comment was just submitted and it has no blank fields, we have an extra comment to count.
{% endcomment %}
{% if comment and comment.created_at %}
  {% assign number_of_comments = article.comments_count | plus: 1 %}
{% endif %}

<div class="grid--full">
  <div class="grid__item text-center blog-illustration">
      <div class="content-wrapper--horizontal section-header recipe-title">
        <div class="display-table-cell">
          <a href="{{blog.url}}">{{ blog.title | uppercase }}</a>
          <h1 class="wavy-underline">
            {{ article.title }}
          </h1>

          {% capture author %}
            <strong>{{ article.author }}</strong>
          {% endcapture %}

        </div>
      </div>
    </div>

    {% if article.image %}
    <div class="">
        {% assign image = article.image %}

        {% include "attribute-image-box-ratio" %}

        {% include "filter-rias-img-url" input: image %}
        {% assign image_url = output %}
        <div class="">
          <div class="image-placeholder-cover box-ratio article-feature-image">
            <img
              data-src="{{ image_url }}"
              data-ratio="{{ image.aspect_ratio }}"
              data-sizes="auto"
              alt="{{ image.alt | escape }}"
              data-parent-fit="cover"
              class="lazyload lazyload-fade">

            <noscript>
              <img src="{{ image | img_url: '1200x' }}" alt="{{ image.alt | escape }}">
            </noscript>
          </div>
        </div>
        {% if article.metafields.custom_fields["photo_credit"] != blank %}
          <div class="image-credit text-center">Photo by {{ article.metafields.custom_fields["photo_credit"] }}</div>
        {% endif %}
      </div>
    {% endif %}
  </div>



  <article class="recipe" itemscope itemtype="http://schema.org/Article">

    {% if article.metafields.custom_fields["serves"] != blank or article.metafields.custom_fields["recipe_introduction"] != blank or article.metafields.custom_fields["recipe_by"] != blank  %}
      <div class="article-introduction container grid">
        <div class="grid__item {% if article.metafields.custom_fields["recipe_introduction"] == blank %}center{% else %}large--one-third{% endif %}">
          <h2> {{article.title}} </h2>
          {% if article.metafields.custom_fields["recipe_by"] != blank %}
            <div class="recipe-by ">  Recipe By: {{ article.metafields.custom_fields["recipe_by"] }}
            </div>
          {% endif %}

          {% if article.metafields.custom_fields["serves"] != blank %}
            <p class="serves">Serves:
                {{ article.metafields.custom_fields["serves"] }}
            </p>
          {% endif %}
        </div>
        <div class="content grid__item large--two-thirds">
           {{ article.metafields.custom_fields["recipe_introduction"] }}
        </div>
      </div>
    {% endif %}

    <div  class="wave-hr"></div>

    <div class="rte container grid" itemprop="articleBody">
      <div class="grid__item large--one-third article-ingredients">
        <span class="cart-icon cart-svg">  <svg><use xlink:href="#icon-cart"></use></svg></span>
        <h4> Ingredients </h4>
        {{ article.content }}
        <div class="organic-background js-article-button " style="margin: 0px 0 40px 0;">
          <button type="submit" id="AddToCart" name="add" class="btn rough-btn js addToCart js-article-submit article-button">
            <svg width="259" height="61.538" viewBox="0 0 259 61.538">
              <defs>
                <clipPath id="clip-path">
                  <rect width="259" height="61.538" fill="#f41f86"/>
                </clipPath>
              </defs>
              <g id="atc-button" transform="translate(5077 444)">
                <path id="Path_292" data-name="Path 292" d="M65.151,60.59c-9.553.084-19.078-.231-28.629-.175-7.99.047-17.315.187-24.119-1.555C3.509,56.582,2.112,51.747,1.717,48.2c-.523-4.693.554-9.39.572-14.084C2.31,29.079.383,24.082.07,19.049-.309,12.936.086,2.153,21.528.334c8.89-.755,18.394.253,27.307.479,27,.686,53.416-.677,80.328-.811,17.382-.085,34.369,1.555,51.715,1.676,10.908.076,21.564-.883,32.369-1.24,5-.166,10-.137,15.015-.062,8.812.13,19.364.012,22.927,3.482a7.23,7.23,0,0,1,1.6,2.459,82.733,82.733,0,0,1,4.089,10.219,30.567,30.567,0,0,1,.791,5.7,36.022,36.022,0,0,1,.1,5.452A13.589,13.589,0,0,0,258.7,32.8a8.08,8.08,0,0,1,.023,4.274c-.611,2.92-1.966,5.812-2.494,8.732a9.427,9.427,0,0,0,.655,6.345,4.544,4.544,0,0,1,.25,3.372c-.315,1.216-1.568,2.477-4.146,3.353-6.6,2.242-17.744,2.239-26.335,2.259-3.418.006-6.822-.09-10.23-.161-7.322-.155-14.685-.086-22.007.07-14.128.3-28,.634-42.182.433-14.193-.2-28.345-.65-42.531-.9-12.172-.213-24.36-.258-36.546-.348" transform="translate(-5077 -444)" />
                <text  data-add-to-cart-text id="Add_To_Cart" data-name="Add To Cart" transform="translate(-5037 -405)" style="font-size: 16px;"><tspan>  Add ingredients to cart</tspan></text>
              </g>
            </svg>
          </button>
      </div>
      </div>
      <div class="grid__item large--two-thirds methods rte">
        <h4> Method </h4>
         {{ article.metafields.custom_fields["methods"] }}
      </div>
    </div>

    {% comment %}
      Show off meta information like comments and tags.
    {% endcomment %}
    <ul class="inline-list">
      {% include 'article-tags' %}
    </ul>



  </article>
  <div class="article-recipe-footer">
    {%- include 'recipes-and-related' -%}
  </div>
</div>

{% schema %}
  {
    "name": "Article",
    "settings": [
      {
        "type": "checkbox",
        "id": "product_related",
        "label": "Show related products"
      },
      {
        "type": "checkbox",
        "id": "product_recipies",
        "label": "Show related recipies"
      }
    ]
  }
{% endschema %}
